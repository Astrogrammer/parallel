# Инструкция по генерации SSH-ключей для доступа к суперкомпьютеру (кластеру) ФКН ВГУ
Использование SSH-ключей — простой и надежный способ обеспечения безопасности соединения с сервером. В отличие от пароля, взломать SSH-ключ практически невозможно, а сгенерировать — очень просто.

## Содержание
1. [Генерация на Linux / MacOS](#linux_mac)
2. [Генерация на Windows](#windows)
    - [Через OpenSSH клиент](#openssh)
    - [Через клиент PuTTY](#putty)

## <a id="linux_mac">На Linux / MacOS</a>
1. Откройте терминал и выполните команду:
```
ssh-keygen -t rsa
```
2. На консоль будет выведен следующий диалог:
```
Enter file in which to save the key (/home/user/.ssh/id_rsa):
```
Для систем Linux/MacOS папка `.ssh` в домашнем каталоге пользователей 
является стандартным местом хранения ssh-ключей. Нажмите на клавишу `Enter`

3. Далее система предложит ввести кодовую фразу для дополнительной защиты SSH-подключения:
```
Enter passphrase (empty for no passphrase):
```
Этот шаг можно пропустить. При ответе на этот и следующий вопрос просто нажмите клавишу `Enter`

4. После этого ключ будет создан, а на консоль будет выведено следующее сообщение:
```
Your identification has been saved in /home/user/.ssh/id_rsa.
Your public key has been saved in /home/user/.ssh/id_rsa.pub.
The key fingerprint is:
476:b2:a8:7f:08:b4:c0:af:81:25:7e:21:48:01:0e:98 user@localhost

The key's randomart image is:

+--[ RSA 2048]----+
|+.o.                      |
|ooE                     |
|oo                       |
|o.+..                    |
|.+.+..  S .             |
|....+  o +              |
|  .o ....                 |
|  .  .. .                  |
|    ....                   |
+-----------------+
```
5. В результате вы получите два ключа: `id_rsa` *(приватный ключ)* и `id_rsa.pub` *(публичный ключ)*.  
*Приватный ключ* всегда хранится на вашей машине.
Его распространение является грубым нарушением секретности, поэтому
**вы не должны пересылать его никому (включая системного администратора сервера)!**  
*Публичный ключ* (id_rsa.pub) должен лежать на сервере, поэтому
вам нужно передать его системному администратору любым предусмотренным для этого способом.

## <a id="windows">На Windows</a>
Существует два варианта генерации SSH-ключей в Windows. 
Первый — использование *OpenSSH клиента*, второй — использование *клиента PuTTY*. 
Ниже представлены инструкции по созданию ключей для обоих вариантов.

### <a id="openssh">OpenSSH клиент</a>
1. Для начала нужно проверить, установлен ли OpenSSH клиент на Windows 10/11.
Для этого зайдите в *Параметры*, а после перейдите во вкладку *Приложения*. Далее нажмите на ссылку *Дополнительные компоненты*, как показано на картинке ниже.
![Проверка наличия OpenSSH](https://github.com/Astrogrammer/parallel/blob/main/images/image1.png)  

В открывшемся окне в строку поиска вводим *Клиент OpenSSH*.
Если в списке он будет найден, то можно сразу приступать к генерации ключей.
Если же он отсутствует, то нужно нажать на кнопку *Добавить компонент*, а после
найти его и выбрать среди всех доступных, используя строку поиска.
Далее останется нажать кнопку *Установить* снизу слева и можно переходить ко второму шагу.

2. Теперь нужно открыть Windows PowerShell.
Для этого нажимаем комбинацию клавиш `Win+X`, выбираем *PowerShell*.
В открывшемся окне вводим команду:
```
ssh-keygen -t rsa
```
После этого запустится процесс генерации.

3. Сначала пользователю будет предложено ввести путь к папке,
в которой будут храниться ключи. Чтобы оставить вариант по умолчанию `.../.ssh/id_rsa`, предложенный системой,
нужно нажать клавишу `Enter`

4. Далее пользователю будет предложено ввести ключевое слово к ключу.
Чтобы пропустить этот шаг, нажмите также клавишу `Enter` 2 раза.

5. Проверяем, что все ключи успешно сгенерированы. Для этого переходим в соответствующий каталог на своем компьютере.

### <a id="putty">Клиент PuTTY</a>
Клиент PuTTY был популярным, когда OpenSSH отсутствовал в Windows. 
Но и сейчас его не перестают использовать. 
Он находится в свободном доступе на официальном сайте разработчика.  
1. Для начала необходимо скачать клиент PuTTY с официального сайта *www.putty.org*.
Скачиваем *бинарники*, не надо качать установочные сборки.
2. Запускаем файл *puttygen.exe*.
В открывшемся окне выбираем классический и повсеместно использующийся тип ключа для генерации — RSA.
Длину оставляем 2048 бит и нажимаем кнопку *Генерировать*.  
![Интерфейс puttygen](https://github.com/Astrogrammer/parallel/blob/main/images/image2.png)  
Во время генерации нужно водить курсором по серой области внутри окна до заполнения зеленой полоски.
Это позволит улучшить защищенность генерируемого ключа благодаря созданию псевдослучайности.

3. После успешной генерации нужно сохранить *публичный* и *приватный ключ* на компьютере.
Для этого создадим папку на диске.  
![Публичный и приватный ключи в папке](https://github.com/Astrogrammer/parallel/blob/main/images/image3.png)  

4. В результате вы получите два ключа: `id_rsa` *(приватный ключ)* и `id_rsa.pub` *(публичный ключ)*.  
*Приватный ключ* всегда хранится на вашей машине.
Его распространение является грубым нарушением секретности, поэтому
**вы не должны пересылать его никому (включая системного администратора сервера)!**  
*Публичный ключ* (id_rsa.pub) должен лежать на сервере, поэтому
вам нужно передать его системному администратору любым предусмотренным для этого способом.
